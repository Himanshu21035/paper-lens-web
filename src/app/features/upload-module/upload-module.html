<div class="upload-wrapper">
  <!-- Header -->
  <div class="upload-header">
    <h2>ðŸ“„ Upload Research Papers</h2>
    <p>Upload PDF files to analyze with AI-powered Q&A</p>
  </div>

  <!-- Drag & Drop Zone -->
  <div 
    class="drop-zone"
    [class.dragging]="isDragging"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)">
    
    <div class="drop-zone-content">
      <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
          d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg>
      
      <h3>Drag & Drop PDF files here</h3>
      <p class="subtext">or</p>
      
      <label for="file-input" class="file-input-label">
        Browse Files
      </label>
      <input 
        id="file-input"
        type="file" 
        accept=".pdf" 
        multiple 
        (change)="onFileSelected($event)"
        style="display: none;">
      
      <p class="file-info">Maximum file size: 50MB</p>
    </div>
  </div>

  <!-- File List -->
  <div class="file-list" *ngIf="hasFiles()">
    <div class="file-list-header">
      <h3>Files ({{ files.length }})</h3>
      <button class="btn-secondary" (click)="clearAll()">Clear All</button>
    </div>

    <div class="file-item" *ngFor="let uploadFile of files; let i = index">
      <div class="file-icon">
        <span class="status-icon">{{ getStatusIcon(uploadFile.status) }}</span>
      </div>
      
      <div class="file-details">
        <div class="file-name">{{ uploadFile.file.name }}</div>
        <div class="file-meta">
          <span class="file-size">{{ formatFileSize(uploadFile.file.size) }}</span>
          <span class="file-status" [ngClass]="'status-' + uploadFile.status">
            {{ uploadFile.status | titlecase }}
          </span>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container" *ngIf="uploadFile.status === 'uploading'">
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="uploadFile.progress"></div>
          </div>
          <span class="progress-text">{{ uploadFile.progress }}%</span>
        </div>

        <!-- Processing Message -->
        <div class="processing-message" *ngIf="uploadFile.status === 'processing'">
          <div class="spinner"></div>
          <span>Processing document...</span>
        </div>

        <!-- Error Message -->
        <div class="error-message" *ngIf="uploadFile.status === 'error'">
          {{ uploadFile.error }}
        </div>

        <!-- Success Actions -->
        <div class="success-actions" *ngIf="uploadFile.status === 'success'">
          <!-- <a [routerLink]="['/papers', uploadFile.paperId]" class="link-button"> -->
            View Paper â†’
          <!-- </a> -->
        </div>
      </div>
      
      <button 
        class="btn-remove" 
        (click)="removeFile(i)"
        [disabled]="!canRemoveFile(uploadFile)">
        âœ•
      </button>
    </div>
  </div>

  <!-- Upload Button -->
  <div class="upload-actions" *ngIf="hasFiles()">
    <button 
      class="btn-primary btn-upload"
      (click)="uploadAll()"
      [disabled]="!hasPendingFiles()">
      <span>Upload {{ getPendingFilesCount() }} File(s)</span>
    </button>
  </div>
</div>
